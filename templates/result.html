<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- π νμ΄μ§€ μ λ© -->
  <title>Com.On - μ¶”μ² λ³΄κ³ μ„</title>

  <!-- π¨ CSS μ¤νƒ€μΌμ‹νΈ λ΅λ“ -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/result.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/chat.css') }}">

  <!-- π§© κµ¬κΈ€ μ•„μ΄μ½ ν°νΈ λ΅λ“ -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- π“ JavaScript μ¤ν¬λ¦½νΈ λ΅λ“ -->
  <script src="{{ url_for('static', filename='js/result.js') }}"></script>
  <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
  <script src="{{ url_for('static', filename='js/logger.js') }}"></script>
</head>

<body>
  <div class="wrapper page-enter-up">

    <!-- π” μƒλ‹¨ λ„¤λΉ„κ²μ΄μ… λ°” -->
    <div class="navbar">
      <div class="navbar-left">
        <!-- π  ν™ λ§ν¬ + λ΅κ³  -->
        <a href="/" class="navbar-logo">
          <img
            src="https://velog.velcdn.com/images/gogogi313/post/21e72a8f-67e3-43c4-9395-8c8e6e5faa18/image.png"
            alt="ν€ λ΅κ³ "
            class="logo-img"
          />
        </a>
        <a href="/" class="logo-title">Com.On</a>
      </div>
      <span class="navbar-title">λ”¥λ¦¬μ„μΉ μ‡Όν•‘ AI</span>
    </div>

    <!-- π“‹ μ‚¬μ©μ μ§μ & κ²°κ³Ό μ„¤λ… -->
    <p id="queryText">μ‚¬μ©μμ μ΅°κ±΄μ„ λ¶λ¬μ¤λ” μ¤‘...</p>
    <p id="queryExplanation"></p>

    <!-- π›οΈ μ¶”μ² μ ν’ μΉ΄λ“ λ λ”λ§ μμ—­ -->
    <div id="product-container"></div>

    <!-- β“ μ—­μ§λ¬Έ μΉ΄λ“ μμ—­ -->
    <div id="refine-question" class="follow-up"></div>

    <!-- β• μ΄μ–΄μ„ κ²€μƒ‰ μ…λ ¥μ°½ -->
    <div id="followup-search"></div>

    <!-- π’¬ μ±—λ΄‡ μΈν„°νμ΄μ¤ μ‹μ‘ -->

    <!-- π“ ν”λ΅ν… μ±— λ²„νΌ -->
    <button id="chat-toggle-button" class="chat-toggle-button" onclick="toggleChat()">π—¨οΈ μ΄μ–΄μ„ λ€ν™”</button>

    <!-- π’¬ μ±— UI λ°•μ¤ -->
    <div class="chat-container minimized" id="chat-container">
      <div class="chat-header">
        <h2>μ΄μ–΄μ„ λ€ν™”</h2>
        <button class="minimize-button" onclick="toggleChat()">
          <span class="material-icons" style="font-size: 1em; vertical-align: middle;">
            expand_more
          </span>
        </button>
      </div>

      <!-- π” λ€ν™” λ©”μ‹μ§€ μμ—­ -->
      <div class="chat-messages" id="chat-messages">
        <div class="message bot">
          <div class="message-content">
            <p>λ” μ •ν™•ν• μ¶”μ²μ„ μ„ν•΄ λ‡ κ°€μ§€ μ§λ¬Έμ„ λ“λ¦΄κ²μ”:</p>
            <div class="quick-questions">
              <button onclick="sendQuickQuestion('κ°€κ²©λ€λ” μ–΄λ μ •λ„κ°€ μ λ‹Ήν•μ‹ κ°€μ”?')">κ°€κ²©λ€λ” μ–΄λ μ •λ„κ°€ μ λ‹Ήν•μ‹ κ°€μ”?</button>
              <button onclick="sendQuickQuestion('μ£Όλ΅ μ–΄λ–¤ μ©λ„λ΅ μ‚¬μ©ν•μ‹¤ μμ •μΈκ°€μ”?')">μ£Όλ΅ μ–΄λ–¤ μ©λ„λ΅ μ‚¬μ©ν•μ‹¤ μμ •μΈκ°€μ”?</button>
              <button onclick="sendQuickQuestion('νΉλ³„ν μ„ νΈν•λ” λΈλλ“κ°€ μμΌμ‹ κ°€μ”?')">νΉλ³„ν μ„ νΈν•λ” λΈλλ“κ°€ μμΌμ‹ κ°€μ”?</button>
              <button onclick="sendQuickQuestion('μ¶”κ°€λ΅ ν•„μ”ν• κΈ°λ¥μ΄ μμΌμ‹ κ°€μ”?')">μ¶”κ°€λ΅ ν•„μ”ν• κΈ°λ¥μ΄ μμΌμ‹ κ°€μ”?</button>
            </div>
          </div>
        </div>
      </div>

      <!-- π“ μ‚¬μ©μ μ…λ ¥ -->
      <div class="chat-input">
        <input type="text" id="message-input" placeholder="μ›ν•μ‹λ” μ΅°κ±΄μ„ μ…λ ¥ν•΄μ£Όμ„Έμ”...">
        <button onclick="sendMessage()">μ „μ†΅</button>
      </div>
    </div>

    <!-- π“¦ μ„λ²„μ—μ„ μ „λ‹¬λ°›μ€ μ ν’ λ¦¬μ¤νΈ (Jinja λ°λ³µ) -->
    <div class="search-results">
      <div class="product-container">
          {% for product in products %}
          <div class="product-card">
              <img src="{{ product.image }}" alt="{{ product.title }}">
              <div class="product-info">
                  <h3>{{ product.title }}</h3>
                  <p class="price">{{ product.price }}</p>
                  <p class="mall">{{ product.mall }}</p>
              </div>
          </div>
          {% endfor %}
      </div>
    </div>

    <!-- π”„ λ΅λ”© μ¤‘ μ¤λ²„λ μ΄ -->
    <div class="loading-overlay" id="loading-overlay">
      <div style="text-align: center;">
          <div class="loading-spinner"></div>
          <div class="loading-text">κ²€μƒ‰ μ¤‘...</div>
      </div>
    </div>

    <!-- π“ Google Tag Manager (noscript) -->
    <noscript>
      <iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-MZHQSKG5"
        height="0"
        width="0"
        style="display:none;visibility:hidden"
      ></iframe>
    </noscript>
  </div>
</body>
</html>
